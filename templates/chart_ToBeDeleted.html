{%extends "master_layout.html"%}
{% block script %}
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
	  console.log("google is : " + typeof google);
      console.log("google.visualization is : " + typeof google.visualization);
      var chart_to_load = '{{chartToLoad}}';
      // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart']});
      google.charts.load('current', {'packages':['bar']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {

        //Create the data table.
        var data = google.visualization.arrayToDataTable([
            ['Week',{% for team_position in team_positions %}'{{team_position.team}}',{% endfor %}],
            {% for n in range (team_positions[0].position|length) %}
            [{{n + 1}},{% for team_position in team_positions %}{{team_position.position[n]}},{% endfor %}],
            {% endfor %}
          ]);

          var options = {
            width:1800,
            height:1000,
            title: 'Trend',
            legend: { position: 'bottom' },
            series: {
              1: {targetAxisIndex: 1},
              0: {targetAxisIndex: 0}
            },
            vAxes: {
                // Adds titles to each axis.
              0: {title: 'League Position'},
            },
            vAxis: {
              direction:-1,
              viewWindow: {
                min: 1,
                max: 20
              },
              ticks: [1, 4 , 8, 12, 16, 20]
            },
            hAxis: {
              maxValue:32,
              ticks: [2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38]
            },
          };
            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
            chart.draw(data, options);

      };//end function drawChart()
    </script>
    {% endblock %}

{%block content%}

  {% block chart_options %}
    <form action="/charts/" id="chart_selector" method="get">
      <select name="chart_select" id="chart_types">
        <option selected="selected">Select chart type:</option>
        <option value="barChartGames">Bar Chart - Games</option>
        <option value="barChartPoints">Bar Chart - Points</option>
        <option value="lineChart">Line Chart</option>
      </select>
      <p>
        <fieldset>
          <legend>Team: </legend>
          {% for team in team_list %}
            <input name="team_checked" type="checkbox" value='{{team.name}}'>{{team.name.title()}}
          {% endfor %}
        </fieldset>
      </p>
    </form>
  {% endblock %}

  <div id="chart_div" style="border: 1px solid #ccc"></div>
{%endblock%}
